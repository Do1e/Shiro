'use client'

import dayjs from 'dayjs'
import type { FC } from 'react'

import { Divider } from '~/components/ui/divider'
import { toast } from '~/lib/toast'
import { useCurrentPostDataSelector } from '~/providers/post/CurrentPostDataProvider'
import { useAggregationSelector } from '~/providers/root/aggregation-data-provider'

export const PostCopyright: FC = () => {
  const name = useAggregationSelector((data) => data.user.name)

  const webUrl = useAggregationSelector((data) => data.url.webUrl)
  const data = useCurrentPostDataSelector(
    (data) => {
      if (!webUrl) return null
      if (!data) return null
      return {
        title: data.title,
        link: `${webUrl}/posts/${data.category.slug}/${data.slug}`,
        date: data.modified,
      }
    },
    [webUrl],
  )
  if (!data) return null
  const { title, link, date } = data
  return (
    <section
      className="mt-4 text-sm leading-loose text-gray-600 dark:text-neutral-400"
      id="copyright"
    >
      <p>文章标题：{title}</p>
      <p>文章作者：{name}</p>
      <p>
        文章链接：<span>{link}</span>{' '}
        <a
          onClick={() => {
            navigator.clipboard.writeText(link)
            toast.success('已复制文章链接')
          }}
          data-hide-print
          className="cursor-pointer select-none"
        >
          [复制]
        </a>
      </p>
      <p>
        最后修改时间:{' '}
        {date ? dayjs(date).format('YYYY 年 MM 月 DD 日 H:mm') : '暂没有修改过'}
      </p>
      <Divider />
      <div>
        <div className="float-right ml-4">
          <svg
            width="183.101"
            height="68.3"
            viewBox="0 0 183.101 72"
            xmlns="http://www.w3.org/2000/svg"
          >
            <g
              id="svgGroup"
              stroke-linecap="round"
              fill-rule="evenodd"
              font-size="9pt"
              stroke="currentColor"
              fill="currentColor"
              stroke-width="0.25mm"
            >
              <path
                d="M 20.17 68.244 A 31.628 31.628 0 0 0 22.001 68.3 Q 27.301 68.3 32.701 67.5 Q 38.101 66.7 43.201 65.4 A 72.092 72.092 0 0 0 47.832 64.092 A 86.178 86.178 0 0 0 55.801 61.1 Q 62.301 58.3 68.401 54.4 A 74.553 74.553 0 0 0 68.591 54.278 A 67.887 67.887 0 0 0 79.401 45.7 Q 84.301 40.9 87.201 35.35 Q 90.101 29.8 90.101 23.8 Q 90.101 18.8 87.851 15.15 A 18.288 18.288 0 0 0 86.78 13.597 A 19.421 19.421 0 0 0 81.751 9.05 A 33.661 33.661 0 0 0 80.026 8.024 A 37.468 37.468 0 0 0 73.201 5.1 Q 68.501 3.6 63.501 2.9 A 4.112 4.112 0 0 0 63.531 2.86 Q 64.101 2.08 64.101 1.3 Q 64.101 0.274 63.167 0.058 A 2.518 2.518 0 0 0 62.601 0 A 3.601 3.601 0 0 0 62.467 0.003 Q 61.871 0.025 61.601 0.25 A 1.904 1.904 0 0 0 61.425 0.418 Q 61.213 0.646 61.001 1 A 17.892 17.892 0 0 1 60.901 1.099 A 16.292 16.292 0 0 1 60.201 1.75 Q 59.801 2.1 59.301 2.5 Q 56.801 2.3 54.351 2.2 Q 51.901 2.1 49.401 2.1 L 45.951 2.1 Q 44.201 2.1 42.501 2.3 Q 37.701 2.7 33.001 3.35 Q 28.301 4 23.701 5.4 Q 17.501 7.2 12.051 10.55 A 33.443 33.443 0 0 0 9.769 12.083 A 27.871 27.871 0 0 0 3.301 18.65 A 18.07 18.07 0 0 0 1.164 22.749 A 19.736 19.736 0 0 0 0.001 29.6 Q 0.001 32.1 0.901 34.95 Q 1.801 37.8 3.751 40.05 A 9.337 9.337 0 0 0 5.563 41.665 A 10.269 10.269 0 0 0 8.801 43.1 A 0.519 0.519 0 0 1 8.877 43.106 Q 8.916 43.112 8.962 43.124 A 1.304 1.304 0 0 1 9.051 43.15 Q 9.201 43.2 9.301 43.2 A 1.897 1.897 0 0 0 9.387 43.198 A 1.465 1.465 0 0 0 10.451 42.7 A 2.073 2.073 0 0 0 10.593 42.524 A 1.551 1.551 0 0 0 10.901 41.6 Q 10.901 41 10.551 40.75 Q 10.201 40.5 9.701 40.3 A 15.905 15.905 0 0 1 8.812 39.895 Q 8.201 39.592 7.701 39.269 A 7.356 7.356 0 0 1 6.751 38.55 A 6.29 6.29 0 0 1 6.604 38.413 Q 6.096 37.923 5.649 37.276 A 10.496 10.496 0 0 1 4.901 36 Q 4.101 34.5 3.751 32.85 Q 3.401 31.2 3.401 29.6 A 19.491 19.491 0 0 1 3.402 29.425 A 15.895 15.895 0 0 1 6.601 19.75 A 25.47 25.47 0 0 1 9.049 16.952 A 29.033 29.033 0 0 1 14.851 12.55 Q 19.901 9.6 25.401 8 Q 29.701 6.8 34.001 6.15 Q 38.301 5.5 42.701 5.1 Q 46.201 4.8 49.701 4.8 A 81.604 81.604 0 0 1 49.81 4.8 A 75.011 75.011 0 0 1 56.501 5.1 Q 55.701 5.8 54.951 6.45 A 13.646 13.646 0 0 0 54.758 6.62 A 15.078 15.078 0 0 0 53.501 7.9 Q 51.301 10.4 49.201 13.2 Q 47.101 16 45.101 18.7 Q 40.501 25.1 35.751 32.25 A 89.939 89.939 0 0 0 33.425 35.94 A 76.919 76.919 0 0 0 28.101 46.6 Q 28.001 46.9 27.901 47.15 A 2.11 2.11 0 0 1 27.865 47.235 Q 27.815 47.345 27.747 47.465 A 3.964 3.964 0 0 1 27.601 47.7 Q 24.901 48.5 21.751 49.75 Q 18.601 51 15.701 52.75 Q 12.801 54.5 11.001 56.85 Q 9.201 59.2 9.201 62.2 A 6.086 6.086 0 0 0 9.229 62.791 Q 9.449 65.047 11.401 66.2 A 12.068 12.068 0 0 0 13.978 67.327 A 16.085 16.085 0 0 0 16.651 67.9 Q 18.557 68.15 20.17 68.244 Z M 21.001 65.6 Q 26.301 65.6 31.801 64.75 A 112.704 112.704 0 0 0 42.082 62.681 A 103.798 103.798 0 0 0 42.401 62.6 A 72.63 72.63 0 0 0 49.596 60.381 A 89.513 89.513 0 0 0 54.101 58.6 Q 60.201 56 66.051 52.35 A 63.668 63.668 0 0 0 75.37 45.312 A 58.418 58.418 0 0 0 76.551 44.2 A 42.124 42.124 0 0 0 82.017 37.783 A 36.594 36.594 0 0 0 84.001 34.55 Q 86.801 29.4 86.801 23.8 A 16.267 16.267 0 0 0 86.367 19.952 A 12.23 12.23 0 0 0 84.451 15.7 A 17.549 17.549 0 0 0 79.439 11.022 A 20.991 20.991 0 0 0 78.201 10.3 A 35.679 35.679 0 0 0 71.086 7.433 A 40.644 40.644 0 0 0 69.651 7.05 Q 65.001 5.9 60.401 5.4 Q 59.301 6.4 58.251 7.5 Q 57.201 8.6 56.201 9.7 A 139.881 139.881 0 0 0 53.988 12.379 Q 52.051 14.781 49.801 17.75 Q 46.201 22.5 42.601 27.8 A 200.342 200.342 0 0 0 37.762 35.264 A 172.659 172.659 0 0 0 36.051 38.1 A 95.16 95.16 0 0 0 34.042 41.667 Q 33.149 43.342 32.456 44.837 A 43.863 43.863 0 0 0 31.601 46.8 Q 35.501 46.1 39.501 45.65 Q 43.501 45.2 47.501 45.2 Q 50.101 45.2 53.101 45.75 A 9.818 9.818 0 0 1 55.324 46.42 A 7.195 7.195 0 0 1 57.801 48.2 Q 57.987 48.386 58.086 48.572 A 1.142 1.142 0 0 1 58.101 48.6 A 0.881 0.881 0 0 1 58.173 48.81 Q 58.194 48.908 58.199 49.022 A 1.684 1.684 0 0 1 58.201 49.1 A 1.147 1.147 0 0 1 57.809 49.97 A 1.709 1.709 0 0 1 57.651 50.1 A 2.191 2.191 0 0 1 57.124 50.387 A 1.781 1.781 0 0 1 56.501 50.5 A 1.908 1.908 0 0 1 55.14 49.938 A 2.504 2.504 0 0 1 55.101 49.9 A 5.905 5.905 0 0 0 52.033 48.407 A 7.35 7.35 0 0 0 51.651 48.35 Q 49.601 48.1 47.601 48.1 Q 43.301 48.1 38.951 48.65 Q 34.601 49.2 30.401 50.1 Q 30.101 51.2 29.851 52.35 Q 29.601 53.5 29.601 54.6 A 10.351 10.351 0 0 0 29.645 55.593 Q 29.74 56.574 30.04 57.158 A 1.789 1.789 0 0 0 30.401 57.65 Q 31.052 58.261 31.704 58.507 A 2.681 2.681 0 0 0 32.001 58.6 Q 32.801 58.8 32.801 59.8 A 1.157 1.157 0 0 1 32.634 60.391 Q 32.527 60.574 32.351 60.75 A 1.568 1.568 0 0 1 31.888 61.077 A 1.409 1.409 0 0 1 31.301 61.2 Q 30.916 61.2 30.709 61.141 A 0.63 0.63 0 0 1 30.601 61.1 A 5.705 5.705 0 0 1 28.985 60.095 A 4.988 4.988 0 0 1 27.851 58.6 A 9.747 9.747 0 0 1 26.903 55.389 A 11.354 11.354 0 0 1 26.851 54.85 Q 26.701 52.8 26.801 51.3 A 44.327 44.327 0 0 0 24.745 51.992 Q 23.62 52.399 22.38 52.906 A 81.353 81.353 0 0 0 20.851 53.55 Q 17.501 55 15.051 57.15 A 7.644 7.644 0 0 0 13.464 59.037 A 6.361 6.361 0 0 0 12.601 62.3 Q 12.601 63.8 14.201 64.5 A 11.033 11.033 0 0 0 16.444 65.198 A 13.759 13.759 0 0 0 17.801 65.4 Q 19.709 65.591 20.89 65.6 A 15.069 15.069 0 0 0 21.001 65.6 Z M 160.401 62.1 Q 155.201 62.1 153.151 59.05 A 12.062 12.062 0 0 1 151.179 53.462 A 15.265 15.265 0 0 1 151.101 51.9 A 15.091 15.091 0 0 1 151.33 49.381 Q 151.542 48.133 151.95 46.734 A 33.336 33.336 0 0 1 152.601 44.75 A 37.472 37.472 0 0 1 155.797 38.105 A 42.931 42.931 0 0 1 156.751 36.6 Q 159.401 32.6 162.901 29.95 A 13.374 13.374 0 0 1 166.584 27.942 A 11.547 11.547 0 0 1 170.401 27.3 A 7.554 7.554 0 0 1 172.169 27.496 A 5.194 5.194 0 0 1 174.551 28.75 A 4.756 4.756 0 0 1 176.097 32.196 A 6.099 6.099 0 0 1 176.101 32.4 A 13.417 13.417 0 0 1 174.469 38.749 A 17.263 17.263 0 0 1 173.401 40.5 Q 170.701 44.4 166.401 46.9 Q 162.101 49.4 157.201 49.4 Q 156.601 49.4 156.001 49.35 Q 155.401 49.3 154.801 49.2 A 11.054 11.054 0 0 0 154.585 50.507 Q 154.513 51.186 154.502 51.948 A 18.764 18.764 0 0 0 154.501 52.2 A 9.55 9.55 0 0 0 155.751 57 Q 156.828 58.896 159.649 59.158 A 10.286 10.286 0 0 0 160.601 59.2 A 12.086 12.086 0 0 0 166.226 57.792 A 14.135 14.135 0 0 0 166.401 57.7 A 22.385 22.385 0 0 0 169.122 55.994 A 17.382 17.382 0 0 0 171.101 54.3 A 87.683 87.683 0 0 0 172.441 52.931 Q 173.096 52.248 173.658 51.625 A 46.432 46.432 0 0 0 174.301 50.9 Q 175.601 49.4 177.001 47.45 A 88.959 88.959 0 0 0 177.745 46.397 Q 178.926 44.7 180.501 42.3 A 1.868 1.868 0 0 1 180.507 42.289 Q 180.876 41.654 181.579 41.604 A 1.728 1.728 0 0 1 181.701 41.6 A 1.869 1.869 0 0 1 182.272 41.68 Q 182.88 41.875 183.042 42.548 A 2.365 2.365 0 0 1 183.101 43.1 Q 183.101 43.6 182.901 43.9 Q 180.201 48.5 176.901 52.65 A 32.717 32.717 0 0 1 172.009 57.647 A 28.798 28.798 0 0 1 169.551 59.45 A 16.311 16.311 0 0 1 160.56 62.1 A 19.541 19.541 0 0 1 160.401 62.1 Z M 126.969 63.269 A 2.023 2.023 0 0 0 127.301 63.3 A 4.318 4.318 0 0 0 127.393 63.299 Q 127.836 63.29 128.194 63.189 A 1.875 1.875 0 0 0 129.501 62 A 5.875 5.875 0 0 0 129.78 61.339 A 8.02 8.02 0 0 0 130.001 60.6 Q 130.201 59.8 130.401 59.1 A 129.87 129.87 0 0 1 130.526 58.752 A 117.872 117.872 0 0 1 131.401 56.4 L 132.401 53.8 Q 135.501 46.1 139.151 38.7 Q 142.801 31.3 146.701 24.1 Q 149.601 18.7 152.701 13.6 A 0.298 0.298 0 0 0 152.71 13.59 Q 152.798 13.494 153.061 13.075 A 27.931 27.931 0 0 0 153.201 12.85 Q 153.601 12.2 154.051 11.5 Q 154.416 10.931 154.551 10.759 A 0.674 0.674 0 0 1 154.601 10.7 Q 154.901 10.3 155.301 10 Q 156.601 8.9 157.951 7.3 A 19.82 19.82 0 0 0 158.12 7.097 Q 159.345 5.605 160.001 4.2 A 0.352 0.352 0 0 1 160.002 4.167 Q 160.009 4.092 160.051 4.05 A 0.148 0.148 0 0 0 160.078 4.012 Q 160.091 3.987 160.096 3.956 A 0.319 0.319 0 0 0 160.101 3.9 A 1.495 1.495 0 0 0 160.007 3.379 Q 159.902 3.095 159.681 2.825 A 3.099 3.099 0 0 0 159.251 2.4 A 4.392 4.392 0 0 0 158.788 2.064 Q 158.206 1.7 157.701 1.7 A 0.94 0.94 0 0 0 157.309 1.782 A 1.045 1.045 0 0 0 157.001 2 Q 155.701 3.6 154.351 5.15 Q 153.001 6.7 151.601 8.3 Q 151.001 8.9 150.451 9.6 Q 149.901 10.3 149.301 10.9 Q 149.145 11.056 148.714 11.396 A 29.345 29.345 0 0 1 148.451 11.6 Q 148.085 11.881 147.672 12.226 A 37.393 37.393 0 0 0 147.001 12.8 A 11.848 11.848 0 0 0 146.947 12.838 Q 146.429 13.213 145.529 13.944 A 93.741 93.741 0 0 0 144.851 14.5 Q 143.401 15.7 141.801 17.05 Q 140.901 17.81 140.159 18.521 A 23.667 23.667 0 0 0 139.101 19.6 A 13.428 13.428 0 0 0 138.833 19.901 Q 138.232 20.597 138.065 21.017 A 0.784 0.784 0 0 0 138.001 21.3 Q 138.001 21.831 138.546 22.189 A 2.515 2.515 0 0 0 138.951 22.4 A 12.754 12.754 0 0 0 139.086 22.456 Q 139.93 22.8 140.301 22.8 A 0.94 0.94 0 0 0 140.692 22.718 A 1.045 1.045 0 0 0 141.001 22.5 Q 142.301 21.3 143.601 20.15 Q 144.901 19 146.301 17.9 Q 142.301 24.9 138.651 32.2 Q 135.001 39.5 131.501 46.9 Q 130.501 49.2 129.401 51.55 Q 128.301 53.9 127.201 56.3 A 2.147 2.147 0 0 1 127.163 56.431 Q 127.058 56.759 126.77 57.413 A 36.258 36.258 0 0 1 126.551 57.9 Q 126.001 59.1 125.501 60.3 A 27.59 27.59 0 0 0 125.494 60.316 Q 125.102 61.26 125.021 61.641 A 0.809 0.809 0 0 0 125.001 61.8 A 1.152 1.152 0 0 0 125.087 62.253 Q 125.28 62.709 125.901 62.95 A 9.09 9.09 0 0 0 126.173 63.051 Q 126.63 63.213 126.969 63.269 Z M 128.301 41.8 L 128.501 41.8 A 1.356 1.356 0 0 1 129.068 41.912 Q 129.659 42.181 129.801 43.1 Q 129.801 43.32 129.693 43.594 A 2.536 2.536 0 0 1 129.601 43.8 A 69.204 69.204 0 0 1 127.128 47.841 A 50.296 50.296 0 0 1 124.551 51.4 A 17.091 17.091 0 0 1 119.584 55.689 A 16.409 16.409 0 0 1 118.501 56.25 A 16.554 16.554 0 0 1 115.094 57.397 Q 112.682 57.944 109.701 58 A 22.294 22.294 0 0 1 107.079 60.127 A 29.55 29.55 0 0 1 104.551 61.7 A 13.12 13.12 0 0 1 99.734 63.307 A 12.555 12.555 0 0 1 98.201 63.4 Q 95.501 63.4 93.901 62 Q 92.301 60.6 91.551 58.55 A 13.132 13.132 0 0 1 91 56.623 A 9.776 9.776 0 0 1 90.801 54.7 A 15.143 15.143 0 0 1 90.999 52.329 Q 91.223 50.917 91.701 49.35 Q 92.601 46.4 93.301 45.3 A 4.142 4.142 0 0 0 93.285 44.947 A 5.3 5.3 0 0 0 93.251 44.65 Q 93.201 44.3 93.201 44 A 20.082 20.082 0 0 1 93.614 40.016 A 23.849 23.849 0 0 1 94.001 38.4 Q 94.901 35 97.201 32.15 A 17.825 17.825 0 0 1 102.524 27.729 A 20.442 20.442 0 0 1 102.951 27.5 A 16.06 16.06 0 0 1 110.437 25.7 A 18.62 18.62 0 0 1 110.501 25.7 A 14.502 14.502 0 0 1 113.414 25.975 Q 115.169 26.335 116.517 27.167 A 7.895 7.895 0 0 1 117.901 28.25 Q 120.501 30.8 120.501 34.9 Q 120.501 40.474 118.54 44.518 A 16.553 16.553 0 0 1 118.451 44.7 Q 116.401 48.8 114.101 52.6 A 31.272 31.272 0 0 1 113.907 52.981 Q 113.644 53.489 113.431 53.85 A 10.312 10.312 0 0 1 113.401 53.9 A 0.704 0.704 0 0 0 113.36 53.979 Q 113.175 54.4 114.001 54.4 Q 116.753 54.4 119.415 52.239 A 13.976 13.976 0 0 0 119.701 52 Q 122.501 49.6 126.801 42.9 Q 127.036 42.508 127.272 42.238 A 2.834 2.834 0 0 1 127.401 42.1 Q 127.649 41.852 128.103 41.809 A 2.11 2.11 0 0 1 128.301 41.8 Z M 107.801 54.2 L 108.801 54.2 A 42.872 42.872 0 0 0 111.367 50.802 A 52.758 52.758 0 0 0 112.851 48.5 Q 114.801 45.3 116.001 41.85 A 22.551 22.551 0 0 0 116.928 38.334 A 17.583 17.583 0 0 0 117.201 35.3 A 9.35 9.35 0 0 0 116.882 32.807 A 7.497 7.497 0 0 0 115.701 30.35 Q 114.473 28.673 111.772 28.368 A 11.356 11.356 0 0 0 110.501 28.3 Q 108.001 28.3 105.651 29.35 A 17.144 17.144 0 0 0 103.089 30.756 A 14.2 14.2 0 0 0 101.601 31.9 L 101.901 32.3 A 0.746 0.746 0 0 1 102.045 32.247 Q 102.226 32.2 102.501 32.2 A 1.551 1.551 0 0 1 103.425 32.508 A 2.073 2.073 0 0 1 103.601 32.65 Q 104.101 33.1 104.101 33.6 A 1.494 1.494 0 0 1 104.087 33.811 Q 104.063 33.975 104.001 34.1 Q 103.901 34.3 103.701 34.5 Q 102.001 37 100.401 39.2 Q 98.801 41.4 97.401 44.2 A 13.63 13.63 0 0 1 96.75 45.513 A 14.88 14.88 0 0 1 96.701 45.6 Q 97.501 49.3 100.451 51.75 A 10.522 10.522 0 0 0 105.81 54.064 A 14.147 14.147 0 0 0 107.801 54.2 Z M 157.901 46.3 Q 161.701 46.3 165.051 44.25 Q 168.401 42.2 170.551 39.1 Q 172.701 36 172.701 32.8 A 3.6 3.6 0 0 0 172.619 32.009 A 2.495 2.495 0 0 0 172.151 31 A 1.666 1.666 0 0 0 171.399 30.47 Q 171.112 30.364 170.755 30.324 A 4.115 4.115 0 0 0 170.301 30.3 Q 167.701 30.3 165.301 32.05 A 19.418 19.418 0 0 0 161.954 35.181 A 22.973 22.973 0 0 0 160.951 36.45 A 42.444 42.444 0 0 0 158.65 39.907 A 35.682 35.682 0 0 0 157.651 41.7 Q 156.744 43.447 156.175 44.833 A 20.133 20.133 0 0 0 155.701 46.1 Q 156.201 46.2 156.751 46.25 Q 157.301 46.3 157.901 46.3 Z M 98.801 60.6 A 6.871 6.871 0 0 0 101.426 60.062 A 9.149 9.149 0 0 0 102.801 59.35 A 50.496 50.496 0 0 0 104.216 58.434 Q 104.979 57.921 105.631 57.436 A 27.49 27.49 0 0 0 106.201 57 A 16.974 16.974 0 0 1 101.111 55.704 A 13.319 13.319 0 0 1 95.001 50.3 Q 94.901 50.999 94.602 52.394 A 47.541 47.541 0 0 1 94.601 52.4 Q 94.301 53.8 94.301 55.2 Q 94.301 57.2 95.201 58.9 A 2.951 2.951 0 0 0 96.935 60.33 Q 97.725 60.6 98.801 60.6 Z"
                vector-effect="non-scaling-stroke"
              />
            </g>
          </svg>
        </div>
        <p>
          商业转载请联系站长获得授权，非商业转载请注明本文出处及文章链接，您可以自由地在任何媒体以任何形式复制和分发作品，也可以修改和创作，但是分发衍生作品时必须采用相同的许可协议。
          <br />
          本文采用
          <a
            className="shiro-link--underline"
            href="https://creativecommons.org/licenses/by-nc-sa/4.0/"
          >
            CC BY-NC-SA 4.0 - 非商业性使用 - 相同方式共享 4.0 国际
          </a>
          进行许可。
        </p>
      </div>
    </section>
  )
}
